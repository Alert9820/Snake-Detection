<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Safety Assistant</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f8f9fa;
        margin: 0;
        padding: 0;
        text-align: center;
    }
    header {
        background: #4CAF50;
        padding: 15px;
        color: white;
        font-size: 20px;
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        margin-top: 15px;
        background: #4CAF50;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
    button:disabled {
        background: #ccc;
        cursor: not-allowed;
    }
    .loading {
        display: none;
        margin-top: 20px;
        font-size: 18px;
        color: #333;
    }
    .timer {
        font-weight: bold;
        color: red;
        margin-top: 5px;
    }
    .result {
        margin-top: 20px;
        padding: 15px;
        background: white;
        display: inline-block;
        border-radius: 8px;
        max-width: 90%;
        text-align: left;
    }
</style>
</head>
<body>

<header>üêç Snake Safety Assistant</header>

<button id="getLocationBtn">üìç Get My Location</button>

<div class="loading" id="loading">
    Fetching location... ‚è≥
    <div class="timer" id="timer">0s</div>
</div>

<div id="result" class="result" style="display:none;"></div>

<script>
const API_KEY = "pk.7b31d58e4953f91caeb20647287b235d";
const btn = document.getElementById("getLocationBtn");
const loadingDiv = document.getElementById("loading");
const timerEl = document.getElementById("timer");
const resultDiv = document.getElementById("result");

let timerInterval;

btn.addEventListener("click", () => {
    btn.disabled = true;
    loadingDiv.style.display = "block";
    resultDiv.style.display = "none";
    let seconds = 0;
    timerEl.textContent = "0s";
    timerInterval = setInterval(() => {
        seconds++;
        timerEl.textContent = seconds + "s";
    }, 1000);

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error, { timeout: 10000 });
    } else {
        alert("Geolocation is not supported by your browser.");
    }
});

function success(position) {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    fetch(`https://us1.locationiq.com/v1/reverse?key=${API_KEY}&lat=${lat}&lon=${lon}&format=json`)
        .then(response => response.json())
        .then(data => {
            clearInterval(timerInterval);
            loadingDiv.style.display = "none";
            btn.disabled = false;
            resultDiv.style.display = "block";
            resultDiv.innerHTML = `
                <h3>üìç Your Location</h3>
                <p><strong>Address:</strong> ${data.display_name}</p>
                <p><strong>Latitude:</strong> ${lat}</p>
                <p><strong>Longitude:</strong> ${lon}</p>
            `;
        })
        .catch(() => {
            clearInterval(timerInterval);
            loadingDiv.style.display = "none";
            btn.disabled = false;
            alert("Failed to fetch location details.");
        });
}

function error() {
    clearInterval(timerInterval);
    loadingDiv.style.display = "none";
    btn.disabled = false;
    alert("Unable to retrieve your location.");
}
</script>

</body>
</html>
